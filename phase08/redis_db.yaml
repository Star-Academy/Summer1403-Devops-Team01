apiVersion: apps/v1  
kind: Deployment  
metadata:  
  name: redis  
spec:  
  replicas: 1  
  selector:  
    matchLabels:  
      app: redis  
  template:  
    metadata:  
      labels:  
        app: redis  
    spec:
      volumes:
      - name: redis-volume
        persistentVolumeClaim:
          claimName: redis-pvc
      
      containers:  
      - name: redis  
        image: redis
        imagePullPolicy: IfNotPresent 
        ports:  
        - containerPort: 6379
        volumeMounts:
          - mountPath: "/data/redis"
            name: redis-volume
        
        livenessProbe:  
          tcpSocket:  
            port: 6379  
          initialDelaySeconds: 30  
          periodSeconds: 10     
        
        readinessProbe:
          exec:
            command:
            - redis-cli
            - ping
          initialDelaySeconds: 5
          periodSeconds: 5
          failureThreshold: 3
